<div class="p-6 max-w-xl mx-auto">
  <h1 class="text-2xl font-bold text-center mb-6">
    {{ isEditMode ? "Edit" : "Create" }} Car Model
  </h1>

  <form [formGroup]="carModelForm" (ngSubmit)="onSubmit()">
    <mat-form-field appearance="fill" class="w-full mb-4">
      <mat-label>Brand</mat-label>
      <input matInput formControlName="brand" placeholder="Enter brand" />
      <mat-error *ngIf="carModelForm.get('brand')?.hasError('required')">
        Brand is required
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill" class="w-full mb-4">
      <mat-label>Model</mat-label>
      <input matInput formControlName="model" placeholder="Enter model" />
      <mat-error *ngIf="carModelForm.get('model')?.hasError('required')">
        Model is required
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill" class="w-full mb-4">
      <mat-label>Start Year</mat-label>
      <input
        matInput
        type="number"
        formControlName="startYear"
        placeholder="e.g. 2010"
      />
    </mat-form-field>

    <div class="mb-4">
      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Body Type</mat-label>
        <mat-select formControlName="bodyType">
          <mat-option *ngFor="let type of bodyTypes" [value]="type">{{
            type
          }}</mat-option>
        </mat-select>
        <mat-error *ngIf="carModelForm.get('bodyType')?.hasError('required')">
          Body Type is required
        </mat-error>
      </mat-form-field>
    </div>

    <mat-form-field appearance="fill" class="w-full mb-4">
      <mat-label>Volume (L)</mat-label>
      <input
        matInput
        type="number"
        formControlName="volumeLiters"
        placeholder="e.g. 2.0"
        step="0.1"
      />
    </mat-form-field>

    <div class="mb-4">
      <mat-form-field appearance="fill" class="w-full">
        <mat-label>Fuel Type</mat-label>
        <mat-select formControlName="fuelType">
          <mat-option *ngFor="let fuel of fuelTypes" [value]="fuel">{{
            fuel
          }}</mat-option>
        </mat-select>
        <mat-error *ngIf="carModelForm.get('fuelType')?.hasError('required')">
          Fuel Type is required
        </mat-error>
      </mat-form-field>
    </div>

    <div class="mb-4">
      <div class="w-full bg-gray-100 border border-gray-300 rounded px-4 py-2">
        <label for="image" class="block text-sm font-medium text-gray-700 mb-1"
          >Car Model Image (optional)</label
        >
        <input
          type="file"
          id="image"
          (change)="onImageSelected($event)"
          class="block w-full text-sm text-gray-900 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 hover:file:bg-blue-100"
        />
      </div>
      <mat-error *ngIf="imageInvalid && selectedImage">
        Please select a valid image.
      </mat-error>
    </div>

    <div class="flex justify-between mt-6">
      <button
        mat-button
        type="button"
        [routerLink]="['/admin/carmodels']"
        class="bg-gray-500 text-white"
      >
        Cancel
      </button>
      <button
        mat-raised-button
        type="submit"
        color="primary"
        [disabled]="carModelForm.invalid"
      >
        {{ isEditMode ? "Update" : "Create" }} Car Model
      </button>
    </div>
  </form>
</div>
