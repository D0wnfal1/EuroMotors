<div class="checkout-success container mx-auto p-4">
  <h1 class="text-2xl font-bold mb-4">Thank you for your order!</h1>

  <div *ngIf="isLoading" class="flex justify-center my-4">
    <mat-spinner></mat-spinner>
  </div>

  <div *ngIf="error && !isLoading" class="my-4">
    <p class="text-red-500">{{ error }}</p>
  </div>

  <div *ngIf="order && !isLoading" class="bg-white shadow rounded p-4">
    <h2 class="text-xl font-semibold mb-2">Order Details</h2>
    <p><strong>Order Number:</strong> {{ order.id }}</p>
    <p><strong>User:</strong> {{ order.userId || "Guest" }}</p>
    <p><strong>Total Price:</strong> {{ order.totalPrice | currency }}</p>
    <p><strong>Payment ID:</strong> {{ order.paymentId }}</p>
    <p>
      <strong>Delivery Method:</strong>
      {{ order.deliveryMethod === 1 ? "Pickup" : "Delivery" }}
    </p>
    <p><strong>Shipping Address:</strong> {{ order.shippingAddress }}</p>
    <p>
      <strong>Payment Method:</strong>
      {{ order.paymentMethod === 1 ? "Prepaid" : "Cash on Delivery" }}
    </p>
    <p><strong>Created:</strong> {{ order.createdAtUtc | date : "short" }}</p>
    <p><strong>Updated:</strong> {{ order.updatedAtUtc | date : "short" }}</p>

    <h3 class="text-lg font-semibold mt-4">Order Items</h3>
    <table class="min-w-full divide-y divide-gray-200 mt-2">
      <thead class="bg-gray-50">
        <tr>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            Product Code
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            Quantity
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            Unit Price
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            Total Price
          </th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        <tr *ngFor="let item of order.orderItems">
          <td class="px-6 py-4 whitespace-nowrap">{{ item.productId }}</td>
          <td class="px-6 py-4 whitespace-nowrap">{{ item.quantity }}</td>
          <td class="px-6 py-4 whitespace-nowrap">
            {{ item.unitPrice | currency }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            {{ item.price | currency }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <button
    mat-raised-button
    routerLink="/"
    class="mt-4 px-6 py-3 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
  >
    Go to Home
  </button>
</div>
